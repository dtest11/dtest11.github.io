LoadBalance

-------
## 1. ttttt
- 基于权重随机[RandomLoadBalance]

- 基于最少活跃调用数[LeastActiveLoadBalance]

- 基于 hash 一致性的 [ConsistentHashLoadBalance]

- 基于加权轮询[RoundRobinLoadBalance]

## 2. hhhh
- 基于最少活跃调用数

活跃调用数越小，表明该服务提供者效率越高，单位时间内可处理更多的请求。此时应优先将请求分配给该服务提供者

- 基于加权轮询

我们有三台服务器 A、B、C。我们将第一个请求分配给服务器 A，第二个请求分配给服务器 B，第三个请求分配给服务器 C，第四个请求再次分配给服务器 A。这个过程就叫做轮询


比如服务器 A、B、C 权重比为 5:2:1。那么在8次请求中，服务器 A 将收到其中的5次请求，服务器 B 会收到其中的2次请求，服务器 C 则收到其中的1次请求。
  
## framework

- go-zero

zRPC框架中默认的负载均衡算法为P2C，该算法的主要思想是：

1. 从可用节点列表中做两次随机选择操作，得到节点A、B
2. 比较A、B两个节点，选出负载最低的节点作为被选中的节点


- bfe()
硬件负载均衡


## 7层负载 & 4层负载（https://segmentfault.com/a/1190000023814368）

1. 7层（应用层)

通常使用的nginx负载均衡技术， 在网络分层中处于应用层（第七层）的，nginx与客户端建立TCP连接（握手），然后再根据请求信息以及本地配置信息，将请求灵活的分发到不同的服务上。nginx这类7层负载均衡的优缺点都很明显。

- 优点：可以将请求分发到不同的服务上，并且可以根据请求信息进行灵活的代理转发；由于请求会通过负载均衡服务器，负载均衡服务器会过滤一些请求（例如：DOS攻击）避免所有请求信息都打到服务器上，保障了服务器的稳定运行。
- 缺点：处于网络分层的最上层，需要对数据进行解析，与客户端建立连接，效率比较低。

2. 4层 传输层

还有基于传输层（4层）的负载均衡策略。通过分析请求的IP地址以及端口号进行请求的负载均衡。根据请求处理的模式不同4层负载均衡算法可以分为：NAT,D-NAT,DR以及TUN隧道技术等。4层负载均衡的实现方式有：LVS。

- 优点：不对数据进行完全解析，不跟客户端建立连接（握手），请求分发的效率快。
- 缺点：无法灵活的进行转发，负载的服务器必须部署的相同服务器，否则同一个请求信息可能获取的结果是不同的。

--------
 [https://dubbo.apache.org/zh/docs/v2.7/dev/source/loadbalance/](https://dubbo.apache.org/zh/docs/v2.7/dev/source/loadbalance/)

 [https://zhuanlan.zhihu.com/p/34904010](https://zhuanlan.zhihu.com/p/34904010)
